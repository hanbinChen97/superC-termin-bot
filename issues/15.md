# 结构化解析 · 分阶段详细开发计划

## 目录结构建议

```
superc/
  ├── html_pages/         # 存放每一步爬取的原始 HTML
  ├── parsed_json/        # 存放结构化解析后的 JSON
  ├── analysis_docs/      # 存放针对 HTML 元素关注点的 Markdown 文档
  └── main.py             # 工作流主脚本
```

---

## 分阶段任务细化

### 阶段 1：基础爬取
- 新建目录：`superc/html_pages/`
- 用 httpx 下载 HTML，保存为 `superc/html_pages/raw_page.html`
- 建议实现 download_html(url, save_path) 方法。

### 阶段 2：HTML → JSON 转换
- 新建目录：`superc/parsed_json/`
- 用 BeautifulSoup+lxml 解析 HTML，分配唯一 ID，抽取结构化信息。
- 保存为 `superc/parsed_json/page_structure.json`
- 建议实现 html_to_json(html_path, json_save_path) 方法。

### 阶段 3：AI 分析接口
- 输入：`superc/parsed_json/page_structure.json`
- 调用 LLM 进行分析，保存为 `superc/parsed_json/analysis_result.json`
- 建议实现 analyze_structure(json_path, output_path) 方法。

### 阶段 4：HTML 定位提取
- 输入：原始 HTML + AI 分析结果
- 根据 AI 返回的 ID 回到 HTML 提取内容
- 建议实现 extract_by_id(html_path, analysis_path, output_path) 方法。

---

## 关注点文档
- 新建目录：`superc/analysis_docs/`
- 新建文档：`superc/analysis_docs/element_focus.md`
- 内容包括：
  - 关注的 HTML 元素（如 h2、button、form 等）
  - 关注原因
  - 典型示例

示例：

````markdown
# 关注的 HTML 元素说明

## 主要关注元素
- `h2`：职位名称
- `button`：操作按钮
- `form`：表单元素
- `div.job-item`：职位信息列表项

## 关注原因
- `h2` 标签通常用于展示职位名称
- `button` 用于用户操作（如申请、收藏）
- `form` 为用户输入信息的入口

## 示例

```html
<h2 class="job-title">Software Engineer</h2>
<button class="apply-btn">Apply Now</button>
<form id="application-form">...</form>
```
````

---

## main.py 脚本结构建议

```python
import os

def download_html(url, save_path):
    # 用 httpx 下载并保存 HTML
    pass

def html_to_json(html_path, json_save_path):
    # 用 BeautifulSoup + lxml 解析 HTML 并保存为 JSON
    pass

def analyze_structure(json_path, output_path):
    # 调用 LLM，根据结构化 JSON 进行分析并保存结果
    pass

def extract_by_id(html_path, analysis_path, output_path):
    # 根据 AI 返回的 ID，回到 HTML 提取内容
    pass

if __name__ == "__main__":
    # 工作流调度
    pass
```

---

如需具体某一阶段的代码模板或进一步细分任务，请补充说明！